<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiAIDemo.OcrPage"
             Title="OCR Image Reader">

    <Grid Padding="30,20" RowSpacing="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="2*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="3*" />
        </Grid.RowDefinitions>

        <!-- Title -->
        <Label Grid.Row="0"
               Text="OCR Image Reader"
               Style="{StaticResource Headline}"
               HorizontalOptions="Center"
               SemanticProperties.HeadingLevel="Level1" />

        <!-- Instructions -->
        <Label Grid.Row="1"
               Text="Select an image to extract text:"
               FontAttributes="Bold"
               HorizontalOptions="Start" />

        <!-- Image Selection Area -->
        <Border Grid.Row="2"
                Stroke="{AppThemeBinding Light=Gray, Dark=LightGray}"
                StrokeThickness="2"
                StrokeDashArray="5,5"
                BackgroundColor="{AppThemeBinding Light=#F9F9F9, Dark=#2D2D30}"
                Padding="20"
                StrokeShape="RoundRectangle 10">
            
            <Grid>
                <Image x:Name="SelectedImage"
                       
                       IsVisible="False"
                       HorizontalOptions="Fill"
                       VerticalOptions="Center" />
                
                <GraphicsView x:Name="OcrGraphicsView"
                              
                              IsVisible="False"
                              BackgroundColor="Transparent"
                              HorizontalOptions="Fill"
                              VerticalOptions="Fill" />
                
                <Label x:Name="PlaceholderLabel"
                       Text="📷 Tap to select an image"
                       FontSize="16"
                       TextColor="{AppThemeBinding Light=Gray, Dark=LightGray}"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"
                       HorizontalTextAlignment="Center" />
            </Grid>
            
            <Border.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnImageAreaTapped" />
            </Border.GestureRecognizers>
        </Border>

        <!-- Extract Button -->
        <Button Grid.Row="3"
                x:Name="CounterBtn"
                Text="Extract Text from Image" 
                SemanticProperties.Hint="Extract text from the selected image using OCR"
                Clicked="OnCounterClicked"
                HorizontalOptions="Fill"
                IsEnabled="False" />

        <!-- Extracted Text Label -->
        <Label Grid.Row="4"
               Text="Extracted Text:"
               FontAttributes="Bold" />

        <!-- Text Output Area -->
        <Border Grid.Row="5"
                Stroke="{AppThemeBinding Light=Gray, Dark=LightGray}"
                StrokeThickness="1"
                BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#2D2D30}"
                Padding="10"
                StrokeShape="RoundRectangle 5">
            <Editor x:Name="ResponseEditor"
                    Placeholder="Extracted text will appear here..."
                    IsReadOnly="True"
                    FontSize="14"
                    BackgroundColor="Transparent"
                    TextColor="{AppThemeBinding Light=Black, Dark=White}"
                    HorizontalOptions="FillAndExpand"
                    VerticalOptions="FillAndExpand" />
        </Border>

    </Grid>

</ContentPage>
